---
node_id: stamper_node
node_version: 1.0.0
contract_description: State contract for stamper node - stamps files with ONEX metadata
input_state:
  type: object
  required:
    - version
    - file_path
  properties:
    version:
      type: string
      description: Schema version for input state
    file_path:
      type: string
      description: Path to the file to be stamped
    force_overwrite:
      type: boolean
      description: Whether to overwrite existing metadata
      default: false
    metadata_override:
      type: object
      description: Optional metadata fields to override
      default: null
    correlation_id:
      type: string
      description: Optional correlation ID for request tracking and telemetry
      default: null
output_state:
  type: object
  required:
    - version
    - status
    - message
  properties:
    version:
      type: string
      description: Schema version for output state (matches input)
    status:
      type: string
      enum:
        - success
        - failure
        - warning
      description: Execution status
    message:
      type: string
      description: Human-readable result message
    stamped_file_path:
      type: string
      description: Path to the stamped file
    metadata_hash:
      type: string
      description: Hash of the stamped metadata
examples:
  valid_input:
    version: 1.0.0
    file_path: src/example/file.py
    force_overwrite: false
    correlation_id: stamp-123
  valid_output:
    version: 1.0.0
    status: success
    message: File stamped successfully
    stamped_file_path: src/example/file.py
    metadata_hash: abc123def456
